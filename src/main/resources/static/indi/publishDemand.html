<!DOCTYPE html>
<html lang="zh" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <style type="text/css">
        .next-level-menu {
            position: absolute;
            top: 0;
            right: -250px;
            width: 250px;

            list-style: none;
            padding: 0;
            margin: 0;
            display: none;
        }

        .next-level-menu > li {
            height: 40px;
            background: darkgray;
            padding-left: 5px;
            padding-right: 5px;
        }

        .next-level-menu > li:hover {
            background: orangered;
        }

        .second-level-menu {
            position: absolute;
            top: 40px;
            left: 0;
            width: 150px;
            list-style: none;
            padding: 0;

            display: none;
        }

        .second-level-menu > li {
            position: relative;
            height: 40px;
            background: darkgray;
        }

        .second-level-menu > li:hover {
            background: orangered;
        }

        .top-level-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .top-level-menu > li {
            position: relative;
            float: left;
            height: 40px;
            width: 150px;
            background: darkgray;
            text-align: center;
            line-height: 40px;
        }

        .top-level-menu > li:hover {
            background: orangered;
        }


        .top-level-menu li:hover > ul {
            display: inline;
        }

        .top-level-menu a {
            font-family: 微软雅黑;
            color: #FFFFFF;
            text-decoration: none;
            display: block;
        }

        .top-level-menu a:hover {
            color: #000000;
        }

        .next-level-menu a:hover {
            color: #000000;
        }
    </style>
</head>
<body>

<div id="app">
    <div style="height: 40px;width: 100%;background-color: black">
        <div style="width: 15%;float: left; height: 100%;text-align: center;line-height: 40px;color: white;cursor: pointer" onclick="window.location.href='../index_old.html'">科技服务平台</div>

        <div style="float: right;color: white;text-align: center;line-height: 40px">
            <div >
                <div style="float: right;margin-right: 20px">你好,{{username}}</div>
            </div>
        </div>
    </div>

    <div style="text-align: left;width: 100%;margin-top: 20px;color: orangered;margin-left: 10px;font-size: 20px">>需求发布页</div>

    <div style="width: auto; margin-top: 10px;padding: 20px">

        <div style="height: 30px;margin-top: 20px">
            <div style="float: left;width: 25%;line-height: 30px">需求类型:</div>
            <div style="height: 30px;margin-top: 20px">
                <div style="float: left">
                    <select v-model="first_area" @change="first_change">
                        <option >研发设计</option>
                        <option >技术转移</option>
                        <option >其他</option>
                    </select>
                </div>


                <div style="float: left">
                    <select v-show="first_area=='研发设计'" v-model="second_area" @change="second_change">
                        <option >研发</option>
                        <option >设计</option>
                    </select>
                    <select v-show="first_area=='技术转移'" v-model="second_area" @change="second_change">
                        <option >技术咨询</option>
                        <option >技术转让</option>
                        <option >技术交易</option>
                        <option >技术服务</option>
                        <option >技术代理</option>
                        <option >其他技术服务</option>
                    </select>
                </div>


                <div style="float: left">
                    <select v-show="second_area=='研发'" v-model="third_area" @change="third_change">
                        <option >生物医药</option>
                        <option >智能装备</option>
                        <option >新材料</option>
                        <option >现代农业</option>
                        <option >个性化研发</option>
                    </select>
                    <select v-show="second_area=='设计'" v-model="third_area" @change="third_change">
                        <option >IC设计</option>
                        <option >工业设计</option>

                    </select>
                    <select v-show="second_area=='技术咨询'" v-model="third_area" @change="third_change">
                        <option >技术评估与鉴证</option>
                        <option >市场潜力调研</option>
                        <option >投资机会与风险投资</option>

                    </select>
                    <select v-show="second_area=='技术转让'" v-model="third_area" @change="third_change">
                        <option >二次开发</option>
                        <option >技术集成</option>

                    </select>
                    <select v-show="second_area=='技术交易'" v-model="third_area" @change="third_change">
                        <option >技术买卖</option>
                        <option >许可证交易</option>
                        <option >工程承包</option>
                        <option >合作开发经营</option>
                        <option >直接投资</option>
                        <option >技术交流交易会</option>
                    </select>
                    <select v-show="second_area=='技术服务'" v-model="third_area" @change="third_change">
                        <option >技术诊断</option>
                        <option >工程化服务</option>
                    </select>
                </div>


                <div style="float: left">
                    <select v-show="third_area=='生物医药'" v-model="fourth_area">
                        <option >新药发现</option>
                        <option >临床前试验</option>
                        <option >临床试验</option>
                        <option >新药上市</option>
                    </select>

                    <select v-show="third_area=='现代农业'" v-model="fourth_area">
                        <option >新品种新技术</option>
                        <option >农业装备技术</option>
                        <option >农副产品精深加工技术</option>
                        <option >安全生产检测技术</option>
                        <option >动物疾病控制技术</option>
                        <option >植物病虫害综合防治技术</option>
                        <option >其他现代农业技术</option>
                    </select>

                    <select v-show="third_area=='IC设计'" v-model="fourth_area">
                        <option >CPU芯片</option>
                        <option >数字电视芯片</option>
                        <option >智能卡芯片</option>
                        <option >数码消费类芯片</option>
                        <option >移动通讯类芯片</option>
                        <option >其他IC芯片</option>
                    </select>
                    <select v-show="third_area=='工业设计'" v-model="fourth_area">
                        <option >外观设计</option>
                        <option >结构设计</option>
                        <option >样机定制</option>
                        <option >模具制作</option>
                        <option >平面设计</option>
                        <option >UI设计</option>
                        <option >Logo设计</option>
                        <option >图形图标设计</option>
                        <option >包装设计</option>
                        <option >品牌设计</option>
                        <option >其他工业设计</option>
                    </select>


                </div>


            </div>
        </div>

        <div style="height: 30px;margin-top: 20px">
            <div style="float: left;width: 25%;line-height: 30px">项目名称:</div>
            <div style="float: left;width: 60%;line-height: 30px">
                <input type="text" v-model="name" placeholder="请输入项目名称" style="width: 300px">
            </div>
        </div>
        <div style="height: 30px;margin-top: 20px">
            <div style="float: left;width: 25%;line-height: 30px">需求方:</div>
            <div style="float: left;width: 60%;line-height: 30px">
                <input type="text" v-model="demander" placeholder="请输入需求方名称(如企业名称)" style="width: 300px">
            </div>
        </div>

        <div style="height: 30px;margin-top: 20px">
            <div style="float: left;width: 25%;line-height: 30px">联系人:</div>
            <div style="float: left;width: 60%;line-height: 30px">
                <input type="text" v-model="contact" placeholder="请输入联系人" style="width: 300px">

            </div>
        </div>
        <div style="height: 30px;margin-top: 20px">
            <div style="float: left;width: 25%;line-height: 30px">联系方式:</div>
            <div style="float: left;width: 60%;line-height: 30px">
                <input type="text" v-model="phone" placeholder="请输入联系方式" style="width: 300px">

            </div>
        </div>
        <div style="height: 30px;margin-top: 20px">
            <div style="float: left;width: 25%;line-height: 30px">预算:</div>
            <div style="float: left;width: 60%;line-height: 30px">
                <input type="text" v-model="budget" placeholder="请输入预算(如10000元/面谈)" style="width: 300px">

            </div>
        </div>
        <div style="margin-top: 20px;height: 300px;">
            <div style="float: left;width: 25%;line-height: 30px">需求详情描述:</div>
            <div style="float: left;width: 60%;line-height: 30px;height: 300px">
                <textarea style="height: 260px;width: 100%" v-model="des" placeholder="请输入详细需求描述"></textarea>
            </div>
        </div>

        <div style="margin-top: 10px;height: 70px;display:flex;align-items:center;justify-content:center;">
            <div style="width: 120px;height: 40px;background-color: #0959ae;text-align: center;line-height: 40px;color: white;cursor: pointer" @click="publish">
                发布需求
            </div>
        </div>
    </div>
</div>


</body>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            isLogin: 1,
            first_area: '',
            second_area: '',
            third_area: '',
            fourth_area: '',

            type: '',
            username: '',
            name: '',
            demander: '',
            budget: '',
            contact: '',
            phone: '',
            des: '',
        },
        created:function (){
            var token_value=localStorage.getItem("token")
            if(token_value==null){
                window.location.href='member.html'
            }else{
                this.username=token_value
            }
        },
        methods: {
            first_change:function (){
                this.second_area=''
                this.third_area=''
                this.fourth_area=''
            },
            second_change:function (){
                this.third_area=''
                this.fourth_area=''
            },
            third_change:function (){
                this.fourth_area=''
            },
            publish:function (){
                if(this.first_area==''){
                    alert('请选择类型')
                }else{
                    this.type=this.type+this.first_area
                    if(this.second_area!=''){
                        this.type=this.type+'/'+this.second_area
                    }
                    if(this.third_area!=''){
                        this.type=this.type+'/'+this.third_area
                    }
                    if(this.fourth_area!=''){
                        this.type=this.type+'/'+this.fourth_area
                    }
                    let formdate=new FormData()
                    formdate.append('type',this.type)
                    formdate.append('username',this.username)
                    formdate.append('name',this.name)
                    formdate.append('demander',this.demander)
                    formdate.append('budget',this.budget)
                    formdate.append('contact',this.contact)
                    formdate.append('phone',this.phone)
                    formdate.append('des',this.des)
                    fetch('/demand',{
                        method: 'POST',
                        body:formdate
                    })
                    window.location.href='member.html'
                }
            }
        }
    })
</script>
</html>